(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(e,t,n){e.exports=n(302)},302:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(5),o=n.n(c),s=n(38),i=n(33),l=n(34),u=n(39),p=n(35),d=n(40),h=(n(162),n(303)),m=n(304),f=n(306),v=n(90),b=n(309),g="update_post",y="add_post",O="delete_post",x="get_current_list",E=function(){return{type:x}},w=function(e){return{type:"update_current_list",value:e}},j=function(e){return{type:"set_loading",value:e}},k=n(14),S=n(311),C=n(151),_=n(307),N=n(305),A=_.a.TextArea,P=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){e||(n.props.item?n.props.handlePostUpdate(Object(C.a)({},t,{id:n.props.item.id})):n.props.handleAddPost(t),n.props.form.resetFields(),n.props.closeDrawer())})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,n=e.item;return r.a.createElement(N.a,{onSubmit:this.handleSubmit,className:"post-form"},r.a.createElement(N.a.Item,null,t("author",{initialValue:n?n.author:"",rules:[{required:!0,message:"Please input author name!"}]})(r.a.createElement(_.a,{prefix:r.a.createElement(k.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Author"}))),r.a.createElement(N.a.Item,null,t("content",{initialValue:n?n.content:"",rules:[{required:!0,message:"Please input the content!"}]})(r.a.createElement(A,{placeholder:"Content",autosize:{minRows:3,maxRows:8}}))),r.a.createElement(N.a.Item,{style:{textAlign:"center"}},r.a.createElement(v.a,{type:"primary",htmlType:"submit",className:"post-form-button"},n?"Update":"Add")))}}]),t}(a.Component),J=Object(s.b)(null,function(e){return{handleAddPost:function(t){e(function(e){return{type:y,value:e}}(t))},handlePostUpdate:function(t){e({type:g,value:t})}}})(N.a.create()(P)),D=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1},n.showDrawer=function(){n.setState({visible:!0})},n.onClose=function(){n.setState({visible:!1})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.item,n="New Post",a="Create New Post",c="plus";return t&&(n="Edit",a="Edit Post",c="edit"),r.a.createElement("div",null,r.a.createElement(v.a,{type:"primary",onClick:this.showDrawer},r.a.createElement(k.a,{type:c})," ",n),r.a.createElement(S.a,{title:a,width:320,placement:"left",onClose:this.onClose,visible:this.state.visible},r.a.createElement(J,{item:t,closeDrawer:function(){return e.onClose()}})))}}]),t}(a.Component),I=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={showingError:!1},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.list,n=e.handleDeletePost,c=e.loading;return r.a.createElement(a.Fragment,null,r.a.createElement(h.a,{style:{margin:"10px"}},r.a.createElement(m.a,{span:4,offset:10,style:{textAlign:"center"}},r.a.createElement(D,null))),r.a.createElement(h.a,null,r.a.createElement(m.a,{span:12,offset:6},r.a.createElement(f.a,{bordered:!0,dataSource:t,renderItem:function(e){return r.a.createElement(f.a.Item,{actions:[r.a.createElement(D,{item:e},"edit"),r.a.createElement(v.a,{type:"danger",onClick:function(){return n(e.id)}},"delete")]},r.a.createElement(b.a,{title:!0,description:!0,loading:c,active:!0},r.a.createElement(f.a.Item.Meta,{title:e.author,description:e.content})))}}))))}}]),t}(a.Component),U=Object(s.b)(function(e){return{list:e.list,loading:e.loading}},function(e){return e(E()),{handleDeletePost:function(t){e(function(e){return{type:O,value:e}}(t))}}})(I),V=n(32),F={protocol:"https://",api:"jr-posts.herokuapp.com/v1",loading:!1,errorMsg:"",list:[]},M=n(149),R=n(150),T=n(20),q=n.n(T),z=n(42),B=n(310),G=n(69),L=n.n(G),W=q.a.mark($),H=q.a.mark(ee),K=q.a.mark(ne),Q=q.a.mark(ae),X=q.a.mark(re),Y=q.a.mark(ce),Z=q.a.mark(oe);function $(){var e,t,n;return q.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(z.b)();case 2:return e=a.sent,t=e.api,n=e.protocol,a.abrupt("return","".concat(n).concat(t));case 6:case"end":return a.stop()}},W)}function ee(e){var t;return q.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=j(e),n.next=3,Object(z.a)(t);case 3:case"end":return n.stop()}},H)}function te(e){B.a.error(e)}function ne(){var e,t,n,a;return q.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,$();case 2:return e=r.sent,r.prev=3,r.next=6,ee(!0);case 6:return r.next=8,L.a.get("".concat(e,"/posts"));case 8:return t=r.sent,n=t.data,a=w(n.reverse()),r.next=13,Object(z.a)(a);case 13:return r.next=15,ee(!1);case 15:r.next=22;break;case 17:return r.prev=17,r.t0=r.catch(3),r.next=21,ee(!1);case 21:te(r.t0.message);case 22:case"end":return r.stop()}},K,null,[[3,17]])}function ae(e){var t;return q.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$();case 2:return t=n.sent,n.prev=3,n.next=6,L.a.post("".concat(t,"/posts"),e.value);case 6:return n.next=8,ne();case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),te(n.t0.message);case 13:case"end":return n.stop()}},Q,null,[[3,10]])}function re(e){var t,n,a,r,c;return q.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,$();case 2:return t=o.sent,n=e.value,a=n.id,r=n.author,c=n.content,o.prev=4,o.next=7,L.a.put("".concat(t,"/posts/").concat(a),{author:r,content:c});case 7:return o.next=9,ne();case 9:o.next=14;break;case 11:o.prev=11,o.t0=o.catch(4),te(o.t0.message);case 14:case"end":return o.stop()}},X,null,[[4,11]])}function ce(e){var t;return q.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$();case 2:return t=n.sent,n.prev=3,n.next=6,L.a.delete("".concat(t,"/posts/").concat(e.value));case 6:return n.next=8,ne();case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),te(n.t0.message);case 13:case"end":return n.stop()}},Y,null,[[3,10]])}function oe(){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.c)(x,ne);case 2:return e.next=4,Object(z.c)(O,ce);case 4:return e.next=6,Object(z.c)(g,re);case 6:return e.next=8,Object(z.c)(y,ae);case 8:case"end":return e.stop()}},Z)}var se=oe,ie=Object(R.a)(),le=Object(V.createStore)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;if("update_current_list"===t.type){var n=JSON.parse(JSON.stringify(e));return n.list=t.value,n}if("update_api"===t.type){var a=JSON.parse(JSON.stringify(e));return a.api=t.value,a}if("update_protocol"===t.type){var r=JSON.parse(JSON.stringify(e));return r.protocol=t.value,r}if("set_loading"===t.type){var c=JSON.parse(JSON.stringify(e));return c.loading=t.value,c}if("set_error"===t.type){var o=JSON.parse(JSON.stringify(e));return o.errorMsg=t.value,o}return e},Object(M.composeWithDevTools)(Object(V.applyMiddleware)(ie)));ie.run(se);var ue=le,pe=n(308),de=n(66),he=de.a.Option,me=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1},n.hide=function(){n.setState({visible:!1})},n.handleVisibleChange=function(e){n.setState({visible:e})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleSync",value:function(){this.hide(),this.props.handleGetList()}},{key:"render",value:function(){var e=this,t=r.a.createElement(de.a,{value:this.props.protocol,style:{width:100},onChange:this.props.handleProtocolChange},r.a.createElement(he,{value:"http://"},"http://"),r.a.createElement(he,{value:"https://"},"https://"));return r.a.createElement("div",{style:{fontSize:"1.5rem",textAlign:"right",marginRight:".8rem"}},r.a.createElement(pe.a,{content:r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(_.a,{addonBefore:t,value:this.props.api,onChange:this.props.handleUpdateApi}),r.a.createElement(v.a,{onClick:function(){return e.handleSync()},style:{marginTop:10},type:"primary"},"Sync Now")),placement:"bottomRight",title:"Change API",trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},r.a.createElement(k.a,{type:"setting"})))}}]),t}(a.Component),fe=Object(s.b)(function(e){return{api:e.api,protocol:e.protocol}},function(e){return{handleUpdateApi:function(t){e({type:"update_api",value:t.target.value})},handleProtocolChange:function(t){e({type:"update_protocol",value:t})},handleGetList:function(){e(E())}}})(me);o.a.render(r.a.createElement(function(){return r.a.createElement(s.a,{store:ue},r.a.createElement(fe,null),r.a.createElement(U,null))},null),document.getElementById("root"))}},[[153,1,2]]]);
//# sourceMappingURL=main.5dea1a40.chunk.js.map